<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon219.png">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="COIN 1.1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Монеты Судьбы с Мудростью</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
        html{height:100%;background:linear-gradient(135deg,#0f2027 0%,#203a43 50%,#2c5364 100%)}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu',sans-serif;background:linear-gradient(135deg,#0f2027 0%,#203a43 50%,#2c5364 100%);color:#fff;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:12px;overflow-x:hidden}
        .container{max-width:900px;width:100%;display:flex;flex-direction:column;align-items:center;padding:15px}
        header{text-align:center;margin-bottom:20px;width:100%;padding-top:env(safe-area-inset-top,12px)}
        h1{font-size:2rem;margin-bottom:8px;background:linear-gradient(90deg,#FDBB2D,#22C1C3);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 2px 4px rgba(0,0,0,0.3);font-weight:700}
        .subtitle{font-size:1rem;color:#b0e0e6;max-width:700px;margin:0 auto 10px;line-height:1.4}
        .philosopher-note{font-style:italic;color:#9acd32;font-size:0.9rem;margin-top:3px}
        .timer-display{font-size:3rem;font-weight:bold;background:rgba(0,0,0,0.4);padding:12px 25px;border-radius:15px;margin:15px 0;box-shadow:0 8px 20px rgba(0,0,0,0.5);color:#FFD700;text-shadow:0 0 8px rgba(255,215,0,0.5);border:2px solid rgba(255,215,0,0.3);min-width:220px;text-align:center;font-family:'Courier New',monospace;letter-spacing:2px}
        .coins-container{display:flex;justify-content:center;gap:25px;margin:20px 0;flex-wrap:wrap;width:100%}
        .coin{width:130px;height:130px;position:relative;perspective:800px}
        .coin-inner{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform 0.8s}
        .coin-side{position:absolute;width:100%;height:100%;border-radius:50%;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 20px rgba(0,0,0,0.7);border:8px solid #DAA520;overflow:hidden}
        .coin-heads{background:radial-gradient(circle at 30% 30%,#FFE87C,#DAA520);z-index:2}
        .coin-tails{background:radial-gradient(circle at 30% 30%,#FFE87C,#DAA520);transform:rotateY(180deg)}
        .coin-image{width:100%;height:100%;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden}
        .coin-icon{width:100%;height:100%;object-fit:contain;padding:15px}
        .controls{display:flex;gap:20px;margin:20px 0;flex-wrap:wrap;justify-content:center}
        .btn{padding:16px 35px;font-size:1.2rem;font-weight:bold;border:none;border-radius:12px;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:10px;box-shadow:0 6px 15px rgba(0,0,0,0.4);min-width:180px;position:relative;overflow:hidden}
        .btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:0.5s}
        .btn:hover::before{left:100%}
        .btn-start{background:linear-gradient(90deg,#00b09b,#96c93d);color:white}
        .btn-stop{background:linear-gradient(90deg,#ff416c,#ff4b2b);color:white}
        .btn:active{transform:translateY(3px);box-shadow:0 3px 8px rgba(0,0,0,0.3)}
        .btn:disabled{opacity:0.6;cursor:not-allowed;transform:none}
        .outcomes{display:flex;flex-wrap:wrap;justify-content:center;gap:15px;margin-top:20px;width:100%}
        .outcome{flex:1;min-width:220px;padding:20px;border-radius:15px;text-align:center;background:rgba(255,255,255,0.08);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.15);transition:all 0.3s;display:flex;flex-direction:column;justify-content:center;min-height:110px}
        .outcome.active{transform:translateY(-8px) scale(1.03);box-shadow:0 10px 20px rgba(0,0,0,0.4)}
        .outcome-1.active{background:linear-gradient(135deg,rgba(0,176,155,0.25),rgba(150,201,61,0.25));border-color:#00b09b}
        .outcome-2.active{background:linear-gradient(135deg,rgba(255,65,108,0.25),rgba(255,75,43,0.25));border-color:#ff416c}
        .outcome-neutral.active{background:linear-gradient(135deg,rgba(106,17,203,0.25),rgba(37,117,252,0.25));border-color:#6a11cb}
        .outcome-title{font-size:1.5rem;margin-bottom:8px;font-weight:bold}
        .outcome-desc{font-size:1rem;color:#d0e7ff}
        .aphorism-container{margin-top:25px;padding:20px;border-radius:15px;background:linear-gradient(135deg,rgba(15,32,39,0.8),rgba(44,83,100,0.8));text-align:center;width:100%;min-height:180px;display:flex;flex-direction:column;justify-content:center;align-items:center;border:1px solid rgba(255,255,255,0.1);box-shadow:0 8px 20px rgba(0,0,0,0.4);position:relative;overflow:hidden}
        .aphorism-container::before{content:"〰";position:absolute;top:12px;left:15px;font-size:1.5rem;color:rgba(255,215,0,0.3)}
        .aphorism-container::after{content:"〰";position:absolute;bottom:12px;right:15px;font-size:1.5rem;color:rgba(255,215,0,0.3);transform:rotate(180deg)}
        .aphorism-title{font-size:1.5rem;margin-bottom:12px;color:#FFD700;font-weight:600}
        .aphorism-text{font-size:1.2rem;color:#fff;line-height:1.5;font-style:italic;margin-bottom:15px;padding:0 15px;text-shadow:0 2px 4px rgba(0,0,0,0.5)}
        .aphorism-author{font-size:1rem;color:#9acd32;font-weight:500;border-top:1px solid rgba(255,255,255,0.2);padding-top:12px;width:100%}
        .result{margin-top:25px;padding:20px;border-radius:15px;background:rgba(0,0,0,0.3);text-align:center;width:100%;min-height:100px;display:flex;flex-direction:column;justify-content:center;align-items:center;border:1px solid rgba(255,215,0,0.2)}
        .result-title{font-size:1.5rem;margin-bottom:12px;color:#FFD700;font-weight:600}
        .result-text{font-size:1.3rem;color:#fff;font-weight:500}
        .history{margin-top:30px;width:100%}
        .history-title{font-size:1.4rem;margin-bottom:15px;text-align:center;color:#FDBB2D;font-weight:600}
        .history-list{display:flex;flex-direction:column;gap:10px;max-height:180px;overflow-y:auto;padding:8px;background:rgba(0,0,0,0.2);border-radius:12px}
        .history-item{padding:12px;background:rgba(255,255,255,0.1);border-radius:10px;font-size:0.9rem;display:flex;justify-content:space-between;align-items:center;transition:all 0.3s}
        .history-item:hover{background:rgba(255,255,255,0.15);transform:translateX(3px)}
        .history-time{color:#9acd32;font-weight:bold;min-width:60px}
        .history-result{flex:1;text-align:center;padding:0 8px}
        .history-outcome{color:#FFD700;font-weight:bold;min-width:80px;text-align:right}
        footer{margin-top:30px;text-align:center;color:#87CEEB;font-size:0.9rem;padding:15px;border-top:1px solid rgba(255,255,255,0.1);width:100%;margin-bottom:env(safe-area-inset-bottom,15px)}
        @media (max-width:768px){
            h1{font-size:1.7rem}
            .subtitle{font-size:0.95rem}
            .timer-display{font-size:2.5rem;padding:10px 20px;min-width:200px}
            .coin{width:110px;height:110px}
            .btn{padding:14px 25px;font-size:1.1rem;min-width:160px}
            .outcome{min-width:100%}
            .coins-container{gap:20px}
            .aphorism-container{padding:15px;min-height:160px}
            .aphorism-text{font-size:1.1rem}
            .history-list{max-height:150px}
        }
        @media (max-width:480px){
            body{padding:10px}
            .container{padding:10px}
            h1{font-size:1.5rem;margin-bottom:5px}
            .subtitle{font-size:0.9rem;margin-bottom:5px}
            .philosopher-note{font-size:0.8rem}
            .timer-display{font-size:2.2rem;margin:10px 0;min-width:180px}
            .coin{width:100px;height:100px}
            .controls{flex-direction:column;align-items:center;gap:12px}
            .btn{width:100%;max-width:280px}
            .aphorism-text{font-size:1rem;padding:0 10px}
            .aphorism-container{min-height:150px;margin-top:20px}
            .history-item{flex-direction:column;gap:6px;text-align:center;font-size:0.85rem}
            .history-time,.history-outcome{min-width:auto}
        }
        @supports (padding:max(0px)){
            header{padding-top:max(12px,env(safe-area-inset-top))}
            footer{margin-bottom:max(15px,env(safe-area-inset-bottom))}
        }
        @keyframes flip{0%{transform:rotateY(0)}100%{transform:rotateY(360deg)}}
        .flipping{animation:flip 0.5s infinite linear}
        @keyframes fadeIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}
        .fade-in{animation:fadeIn 0.8s ease-out}
        @keyframes glow{0%{box-shadow:0 0 5px rgba(255,215,0,0.5)}50%{box-shadow:0 0 15px rgba(255,215,0,0.8)}100%{box-shadow:0 0 5px rgba(255,215,0,0.5)}}
        .glow{animation:glow 2s infinite}
        .history-list::-webkit-scrollbar{width:6px}
        .history-list::-webkit-scrollbar-track{background:rgba(255,255,255,0.1);border-radius:8px}
        .history-list::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#00b09b,#96c93d);border-radius:8px}
        .coin-glow{box-shadow:0 0 15px rgba(255,215,0,0.7) !important}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Монеты Судьбы с Мудростью</h1>
            <p class="subtitle">Подбросьте монеты и получите философское откровение от великих мыслителей Востока</p>
            <p class="philosopher-note">Вдохновлено мудростью Лао-цзы и Сунь-цзы</p>
        </header>
        
        <div class="timer-display" id="timer">00:00:00</div>
        
        <div class="coins-container">
            <div class="coin" id="coin1">
                <div class="coin-inner">
                    <div class="coin-side coin-heads">
                        <div class="coin-image">
                            <img src="icons/icon5.1.png" alt="Орёл" class="coin-icon">
                        </div>
                    </div>
                    <div class="coin-side coin-tails">
                        <div class="coin-image">
                            <img src="icons/icon5.2.png" alt="Решка" class="coin-icon">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="coin" id="coin2">
                <div class="coin-inner">
                    <div class="coin-side coin-heads">
                        <div class="coin-image">
                            <img src="icons/icon5.1.png" alt="Орёл" class="coin-icon">
                        </div>
                    </div>
                    <div class="coin-side coin-tails">
                        <div class="coin-image">
                            <img src="icons/icon5.2.png" alt="Решка" class="coin-icon">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn btn-start" id="startBtn">
                <i class="fas fa-play-circle"></i> Старт
            </button>
            <button class="btn btn-stop" id="stopBtn" disabled>
                <i class="fas fa-stop-circle"></i> Стоп
            </button>
        </div>
        
        <div class="outcomes">
            <div class="outcome outcome-1" id="outcome1">
                <div class="outcome-title">Два Орла</div>
                <div class="outcome-desc">Исход 1: Действие</div>
            </div>
            
            <div class="outcome outcome-2" id="outcome2">
                <div class="outcome-title">Две Решки</div>
                <div class="outcome-desc">Исход 2: Созерцание</div>
            </div>
            
            <div class="outcome outcome-neutral" id="outcomeNeutral">
                <div class="outcome-title">Баланс</div>
                <div class="outcome-desc">Нейтральный исход: Гармония</div>
            </div>
        </div>
        
        <div class="aphorism-container" id="aphorismContainer">
            <div class="aphorism-title" id="aphorismTitle">Мудрость Востока</div>
            <div class="aphorism-text" id="aphorismText">Нажмите "Старт", чтобы подбросить монеты и получить мудрое изречение</div>
            <div class="aphorism-author" id="aphorismAuthor">Лао-цзы</div>
        </div>
        
        <div class="result" id="result">
            <div class="result-title">Результат броска</div>
            <div class="result-text" id="resultText">Ожидание...</div>
        </div>
        
        <div class="history">
            <div class="history-title">История мудростей</div>
            <div class="history-list" id="historyList">
                <!-- История будет добавляться здесь -->
            </div>
        </div>
        
        <footer>
            <p>Монеты судьбы</p>
            <p>Философия Лао-цзы и Сунь-цзы</p>
            <p>Программа Игоря Ефимова</p>
            <p>Защищена авторскими правами. © 2025</p>
        </footer>
    </div>

    <script>
        const timerDisplay=document.getElementById('timer'),
              startBtn=document.getElementById('startBtn'),
              stopBtn=document.getElementById('stopBtn'),
              coin1=document.getElementById('coin1'),
              coin2=document.getElementById('coin2'),
              coin1Inner=coin1.querySelector('.coin-inner'),
              coin2Inner=coin2.querySelector('.coin-inner'),
              outcome1=document.getElementById('outcome1'),
              outcome2=document.getElementById('outcome2'),
              outcomeNeutral=document.getElementById('outcomeNeutral'),
              aphorismContainer=document.getElementById('aphorismContainer'),
              aphorismTitle=document.getElementById('aphorismTitle'),
              aphorismText=document.getElementById('aphorismText'),
              aphorismAuthor=document.getElementById('aphorismAuthor'),
              result=document.getElementById('result'),
              resultText=document.getElementById('resultText'),
              historyList=document.getElementById('historyList');
        
        const aphorisms={
            heads:[
                {text:"Побеждают те, кто знают, когда можно сражаться, а когда нельзя.",author:"Сунь-цзы"},
                {text:"Лучший воин — тот, кто побеждает без сражения.",author:"Сунь-цзы"},
                {text:"Двигаться вперед — значит концентрировать силу в одной точке.",author:"Лао-цзы"},
                {text:"В быстром натиске — сила, в медленной подготовке — мудрость.",author:"Сунь-цзы"},
                {text:"Тот, кто знает, когда наступать, непобедим.",author:"Сунь-цзы"},
                {text:"Путь в тысячу ли начинается с первого шага.",author:"Лао-цзы"},
                {text:"Нападай там, где противник не готов; появляйся там, где тебя не ждут.",author:"Сунь-цзы"}
            ],
            tails:[
                {text:"Высшее искусство войны — покорить врага без сражения.",author:"Сунь-цзы"},
                {text:"Мудрый человек избегает крайностей, излишеств и распущенности.",author:"Лао-цзы"},
                {text:"Непобедимость заключена в себе, возможность победы — в противнике.",author:"Сунь-цзы"},
                {text:"Знающий не говорит, говорящий не знает.",author:"Лао-цзы"},
                {text:"Лучшая защита — это уклонение от сражения.",author:"Сунь-цзы"},
                {text:"Мягкое и слабое побеждает твердое и сильное.",author:"Лао-цзы"},
                {text:"Кто умеет делать противника неуверенным, тот побеждает без битвы.",author:"Сунь-цзы"}
            ],
            neutral:[
                {text:"Знающий людей — мудр, знающий себя — просветлен.",author:"Лао-цзы"},
                {text:"Великое искусство — это умение сочетать силу и мягкость.",author:"Сунь-цзы"},
                {text:"Истина в том, что победа и поражение — две стороны одной монеты.",author:"Лао-цзы"},
                {text:"Война любит победу и не любит продолжительности.",author:"Сунь-цзы"},
                {text:"Когда много цветов — они теряют свою красоту, когда много слов — они теряют смысл.",author:"Лао-цзы"},
                {text:"Победа достигается тогда, когда обычное становится необычным.",author:"Сунь-цзы"},
                {text:"Тот, кто умеет довольствоваться малым, всегда будет иметь достаточно.",author:"Лао-цзы"},
                {text:"Война — это путь обмана. Поэтому, когда можешь — показывай слабость, когда не можешь — силу.",author:"Сунь-цзы"}
            ]
        };
        
        let timerInterval,startTime,elapsedTime=0,isRunning=false,history=[];
        
        function formatTime(ms){
            const totalSeconds=Math.floor(ms/1000),
                  hours=Math.floor(totalSeconds/3600),
                  minutes=Math.floor((totalSeconds%3600)/60),
                  seconds=totalSeconds%60;
            return `${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
        }
        
        function updateTimer(){
            if(isRunning){
                elapsedTime=Date.now()-startTime;
                timerDisplay.textContent=formatTime(elapsedTime);
                const seconds=Math.floor(elapsedTime/1000);
                if(seconds%5===0){
                    timerDisplay.style.color=getRandomColor();
                }
            }
        }
        
        function getRandomColor(){
            const colors=['#FFD700','#00FF7F','#1E90FF','#FF69B4','#9ACD32','#FF4500'];
            return colors[Math.floor(Math.random()*colors.length)];
        }
        
        function getRandomAphorism(type){
            const aphorismArray=aphorisms[type];
            return aphorismArray[Math.floor(Math.random()*aphorismArray.length)];
        }
        
        function startTimer(){
            if(isRunning)return;
            isRunning=true;
            startTime=Date.now()-elapsedTime;
            timerInterval=setInterval(updateTimer,1000);
            coin1Inner.classList.add('flipping');
            coin2Inner.classList.add('flipping');
            coin1.classList.add('coin-glow');
            coin2.classList.add('coin-glow');
            startBtn.disabled=true;
            stopBtn.disabled=false;
            outcome1.classList.remove('active');
            outcome2.classList.remove('active');
            outcomeNeutral.classList.remove('active');
            aphorismTitle.textContent="Монеты в движении...";
            aphorismText.textContent="Жизнь подобна подбрасыванию монеты — результат известен лишь в момент остановки";
            aphorismAuthor.textContent="Восточная мудрость";
            aphorismContainer.classList.remove('fade-in');
            resultText.textContent="Монеты вращаются...";
            result.classList.add('glow');
        }
        
        function stopTimer(){
            if(!isRunning)return;
            isRunning=false;
            clearInterval(timerInterval);
            coin1Inner.classList.remove('flipping');
            coin2Inner.classList.remove('flipping');
            coin1.classList.remove('coin-glow');
            coin2.classList.remove('coin-glow');
            startBtn.disabled=false;
            stopBtn.disabled=true;
            result.classList.remove('glow');
            const coin1Result=Math.random()>0.5?'heads':'tails';
            const coin2Result=Math.random()>0.5?'heads':'tails';
            if(coin1Result==='tails'){coin1Inner.style.transform='rotateY(180deg)'}else{coin1Inner.style.transform='rotateY(0)'}
            if(coin2Result==='tails'){coin2Inner.style.transform='rotateY(180deg)'}else{coin2Inner.style.transform='rotateY(0)'}
            let outcome,outcomeText,outcomeType,aphorismType;
            if(coin1Result==='heads'&&coin2Result==='heads'){
                outcome=1;
                outcomeText="Два орла - Исход 1: Действие";
                outcomeType="Действие";
                aphorismType="heads";
                outcome1.classList.add('active');
            }else if(coin1Result==='tails'&&coin2Result==='tails'){
                outcome=2;
                outcomeText="Две решки - Исход 2: Созерцание";
                outcomeType="Созерцание";
                aphorismType="tails";
                outcome2.classList.add('active');
            }else{
                outcome=0;
                outcomeText="Орёл и решка - Нейтральный исход: Гармония";
                outcomeType="Гармония";
                aphorismType="neutral";
                outcomeNeutral.classList.add('active');
            }
            resultText.textContent=outcomeText;
            const randomAphorism=getRandomAphorism(aphorismType);
            aphorismTitle.textContent=`Мудрость для "${outcomeType}"`;
            aphorismText.textContent=`"${randomAphorism.text}"`;
            aphorismAuthor.textContent=randomAphorism.author;
            aphorismContainer.classList.add('fade-in');
            addToHistory(outcomeText,randomAphorism);
        }
        
        function addToHistory(resultText,aphorism){
            const now=new Date(),
                  timeString=now.toLocaleTimeString('ru-RU',{hour:'2-digit',minute:'2-digit'}),
                  shortAphorism=aphorism.text.length>60?aphorism.text.substring(0,60)+"...":aphorism.text,
                  historyItem=document.createElement('div');
            historyItem.className='history-item';
            historyItem.innerHTML=`<div class="history-time">${timeString}</div><div class="history-result">"${shortAphorism}"</div><div class="history-outcome">${resultText.split(' - ')[0]}</div>`;
            historyList.appendChild(historyItem);
            history.push({time:timeString,result:resultText,aphorism:aphorism.text,author:aphorism.author});
            if(history.length>8){
                history.shift();
                if(historyList.children.length>8){
                    historyList.removeChild(historyList.firstChild);
                }
            }
            historyList.scrollTop=historyList.scrollHeight;
        }
        
        function resetState(){
            isRunning=false;
            clearInterval(timerInterval);
            elapsedTime=0;
            timerDisplay.textContent=formatTime(0);
            timerDisplay.style.color='#FFD700';
            coin1Inner.classList.remove('flipping');
            coin2Inner.classList.remove('flipping');
            coin1.classList.remove('coin-glow');
            coin2.classList.remove('coin-glow');
            coin1Inner.style.transform='rotateY(0)';
            coin2Inner.style.transform='rotateY(0)';
            startBtn.disabled=false;
            stopBtn.disabled=true;
            outcome1.classList.remove('active');
            outcome2.classList.remove('active');
            outcomeNeutral.classList.remove('active');
            resultText.textContent="Нажмите 'Старт' для начала";
            result.classList.remove('glow');
            aphorismTitle.textContent="Мудрость Востока";
            aphorismText.textContent="Подбросьте монеты, чтобы получить мудрое изречение от великих философов";
            aphorismAuthor.textContent="Лао-цзы и Сунь-цзы";
            aphorismContainer.classList.add('fade-in');
        }
        
        startBtn.addEventListener('click',startTimer);
        stopBtn.addEventListener('click',stopTimer);
        startBtn.addEventListener('touchstart',function(e){e.preventDefault();startTimer()});
        stopBtn.addEventListener('touchstart',function(e){e.preventDefault();stopTimer()});
        timerDisplay.addEventListener('touchstart',function(e){
            let timer;
            const startTime=Date.now();
            timer=setTimeout(()=>{
                resetState();
                timerDisplay.style.transform='scale(0.9)';
                setTimeout(()=>{timerDisplay.style.transform='scale(1)'},200);
            },1000);
            const resetTimer=function(){clearTimeout(timer);document.removeEventListener('touchend',resetTimer)};
            document.addEventListener('touchend',resetTimer);
        });
        resetState();
        setTimeout(()=>{
            const initialAphorism=getRandomAphorism('neutral');
            addToHistory("Орёл и решка - Нейтральный исход: Гармония",initialAphorism);
        },500);
    </script>
</body>
</html>
